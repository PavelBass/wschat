<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="{{ static_url("index.css") }}" type="text/css"/>
    <script>
        // TODO: Pass host, port from tornado
        socket_path = 'ws://localhost:8080/chat';
    </script>
    <title>Rambler Task - Chat</title>
</head>
<body>
    <div id="center">
    <h1>Hi there</h1>
    <div class="row">
        <div>
            <error>{% if error %}{{ error }}{% end %}</error>
            <form method="post">
                {% module xsrf_form_html() %}
            {% if usr is not None %}
                Wellcome, <span class="username">{{ usr }}</span>
                <input type="hidden", name="logout", value="logout"><br>
                <input type="submit" value="Logout">
            {% else %}
                    <label>Login:</label><br>
                    <input type="text" name="login"><br>

                    <label>Password:</label><br>
                    <input type="password" name="pass"><br>

                    <label>Create New User</label>
                    <input type="checkbox" name="create"><br>
                    <input type="submit" value="Ok">
            {% end %}
            </form>
        </div>
    </div>
    <div class="row">
        <div id="chat">
        <p>&nbsp;</p>
        </div>
        <div id="sender">
            <input type="text" id="sendmessage"><input type="button" id="sender_button" value="Send">
        </div>
    </div>
    <div class="row">
        <h2>Rooms</h2>
        {% for room in rooms %}
            <div id="room">{{ room }}</div>
        {% end %}
    </div>
    </div>

    <script type="text/javascript" src="{{ static_url('client.js') }}"></script>
</body>
</html>